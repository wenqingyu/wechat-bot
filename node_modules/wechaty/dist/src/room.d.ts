/// <reference types="node" />
import { EventEmitter } from 'events';
import { Sayable } from './config';
import { Contact } from './contact';
export declare type RoomRawMember = {
    UserName: string;
    NickName: string;
    DisplayName: string;
};
export declare type RoomRawObj = {
    UserName: string;
    EncryChatRoomId: string;
    NickName: string;
    OwnerUin: number;
    ChatRoomOwner: string;
    MemberList?: RoomRawMember[];
};
export declare type RoomEventName = 'join' | 'leave' | 'topic' | 'EVENT_PARAM_ERROR';
export declare type RoomQueryFilter = {
    topic: string | RegExp;
};
export declare type MemberQueryFilter = {
    name?: string;
    alias?: string;
};
/**
 *
 * wechaty: Wechat for Bot. and for human who talk to bot/robot
 *
 * Licenst: ISC
 * https://github.com/zixia/wechaty
 *
 * Add/Del/Topic: https://github.com/wechaty/wechaty/issues/32
 *
 */
export declare class Room extends EventEmitter implements Sayable {
    id: string;
    private static pool;
    private dirtyObj;
    private obj;
    private rawObj;
    constructor(id: string);
    toString(): string;
    toStringEx(): string;
    isReady(): boolean;
    refresh(): Promise<void>;
    private readyAllMembers(memberList);
    ready(contactGetter?: (id: string) => Promise<any>): Promise<void>;
    on(event: 'leave', listener: (this: Room, leaver: Contact) => void): this;
    on(event: 'join', listener: (this: Room, inviteeList: Contact[], inviter: Contact) => void): this;
    on(event: 'topic', listener: (this: Room, topic: string, oldTopic: string, changer: Contact) => void): this;
    on(event: 'EVENT_PARAM_ERROR', listener: () => void): this;
    say(content: string): Promise<any>;
    say(content: string, replyTo: Contact): Promise<void>;
    say(content: string, replyTo: Contact[]): Promise<void>;
    get(prop: any): string;
    private parse(rawObj);
    private parseMap(parseContent, memberList?);
    dumpRaw(): void;
    dump(): void;
    add(contact: Contact): Promise<number>;
    del(contact: Contact): Promise<number>;
    private delLocal(contact);
    quit(): void;
    /**
     * get topic
     */
    topic(): string;
    /**
     * set topic
     */
    topic(newTopic: string): void;
    /**
     * should be deprecated
     * @deprecated
     */
    nick(contact: Contact): string | null;
    alias(contact: Contact): string | null;
    has(contact: Contact): boolean;
    owner(): Contact | null;
    /**
     * find member priority by `name`(contactAlias) / `alias`(roomAlias)
     * when use member(name:string), equals to member({name:string})
     */
    member(filter: MemberQueryFilter): Contact | null;
    member(name: string): Contact | null;
    memberList(): Contact[];
    static create(contactList: Contact[], topic?: string): Promise<Room>;
    static findAll(query?: RoomQueryFilter): Promise<Room[]>;
    static find(query: RoomQueryFilter): Promise<Room>;
    /**
     * @todo document me
     */
    static load(id: string): Room;
}
